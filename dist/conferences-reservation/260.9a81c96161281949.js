"use strict";(self.webpackChunkconferences_reservation=self.webpackChunkconferences_reservation||[]).push([[260],{8135:(C,A,r)=>{r.d(A,{D:()=>T});var t=r(5412),s=r(9406),o=r(4650),_=r(6895),l=r(7392),q=r(4859),f=r(4767),Z=r(9383);function b(u,x){if(1&u){const d=o.EpF();o.ynx(0),o.TgZ(1,"app-reservation",8),o.NdJ("closeModal",function(){o.CHM(d);const v=o.oxw();return o.KtG(v.close(!0))}),o.qZA(),o.BQk()}if(2&u){const d=o.oxw();o.xp6(1),o.Q6J("type",d.data.bookingType)("canManageReservation",!0)("reservationData",d.reservationData)("fireSaveAction",d.fireSave)}}function g(u,x){1&u&&o._UZ(0,"i",9)}let T=(()=>{class u{constructor(d,p,v){this.dialogRef=d,this.fireStoreService=p,this.data=v,this.reservationData=[],this.fireSave=!1,this.isDataLoaded=!1}ngOnInit(){this.data&&this.data.id&&this.fireStoreService.getPrimaryWithRelatedParticipants(this.data.id).subscribe(d=>{this.reservationData=d,this.isDataLoaded=!0})}close(d=!1){this.dialogRef.close({fireRefresh:d})}save(){this.fireSave=!0}}return u.\u0275fac=function(d){return new(d||u)(o.Y36(t.so),o.Y36(s.TB),o.Y36(t.WI))},u.\u0275cmp=o.Xpm({type:u,selectors:[["ng-component"]],decls:15,vars:9,consts:[["mat-dialog-title","",1,"d-flex","justify-content-between","align-content-center"],[1,"font-weight-bold"],[1,"p-0","d-flex","justify-content-cener","align-items-center",3,"click"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions",""],["color","primary","mat-flat-button","","type","button","cdkFocusInitial","",3,"disabled","click"],["class","fa-solid fa-spinner fa-spin px-2",4,"ngIf"],[3,"type","canManageReservation","reservationData","fireSaveAction","closeModal"],[1,"fa-solid","fa-spinner","fa-spin","px-2"]],template:function(d,p){1&d&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return p.close()}),o.TgZ(5,"mat-icon"),o._uU(6,"close"),o.qZA()()(),o.TgZ(7,"div",3),o.YNc(8,b,2,4,"ng-container",4),o.qZA(),o.TgZ(9,"div",5)(10,"button",6),o.NdJ("click",function(){return p.save()}),o.TgZ(11,"span"),o._uU(12),o.ALo(13,"translate"),o.qZA(),o.YNc(14,g,1,0,"i",7),o.qZA()()),2&d&&(o.xp6(2),o.Oqu(o.lcZ(3,5,p.data?"common.update":"common.add")),o.xp6(6),o.Q6J("ngIf",p.data&&p.data.bookingType&&p.isDataLoaded),o.xp6(2),o.Q6J("disabled",p.fireSave),o.xp6(2),o.hij(" ",o.lcZ(13,7,"common.save"),""),o.xp6(2),o.Q6J("ngIf",p.fireSave))},dependencies:[_.O5,l.Hw,q.lW,t.uh,t.xY,t.H8,f.a,Z.X$],encapsulation:2}),u})()},4767:(C,A,r)=>{r.d(A,{a:()=>it});var t=r(4650),s=r(4006),o=r(8179),_=r(7585),l=r(6094);class q{constructor(){this.addressList=[],this.busList=[],this.isArabic=!0,this.gender=l.Y0,this.socialStatus=l.G3,this.bookingType=l.cY,this.selectedType=l.cY.individual,this.isEditMode=!1,this.bookingStatusList=[{key:"bookingStatus.new",value:l.gn.new},{key:"bookingStatus.confirmed",value:l.gn.confirmed},{key:"bookingStatus.canceled",value:l.gn.canceled},{key:"bookingStatus.duplicated",value:l.gn.duplicated}],this.form={};const n=new Date;this.maxDate=new Date(n.getTime()-864e5),this.adultMinDate=new Date(n.getFullYear()-90,n.getMonth(),n.getDate()),this.childMinDate=new Date(n.getFullYear()-12,n.getMonth(),n.getDate())}get participants(){return this.form.get("participants")}}var f=r(9406),Z=r(6895),b=r(7392),g=r(9549),T=r(1948),u=r(9602),x=r(4385),d=r(3238),p=r(4144),v=r(4859),I=r(9383);function D(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function h(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.arabicLettersOnly")," "))}function L(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function U(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.mobileNumber")," "))}function M(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.AsE("",a.price," ",t.lcZ(2,2,"common.egp"),"")}}function O(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-option",23),t._uU(2),t.YNc(3,M,3,4,"span",7),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.name," "),t.xp6(1),t.Q6J("ngIf",a.price>0)}}function E(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function R(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-option",23),t._uU(2),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("value",a.id),t.xp6(1),t.Oqu(a.name)}}function N(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function y(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function J(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function Q(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-option",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("value",a.value),t.xp6(1),t.Oqu(t.lcZ(3,2,a.key))}}function k(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",24),t.YNc(6,Q,4,4,"ng-container",10),t.qZA()(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",25),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",26),t.qZA(),t.TgZ(17,"mat-form-field",5)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",27),t.qZA(),t.TgZ(22,"mat-form-field",20)(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"textarea",28),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,6,"common.bookingStatus")),t.xp6(3),t.Q6J("ngForOf",a.model.bookingStatusList),t.xp6(3),t.Oqu(t.lcZ(10,8,"common.totalCost")),t.xp6(5),t.Oqu(t.lcZ(15,10,"common.paid")),t.xp6(5),t.Oqu(t.lcZ(20,12,"common.remaining")),t.xp6(5),t.Oqu(t.lcZ(25,14,"common.adminNotes"))}}function P(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"div",37),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",38),t.NdJ("click",function(){t.CHM(a);const m=t.oxw().index,c=t.oxw(2);return t.KtG(c.remove(m))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()()}if(2&e){const a=t.oxw().index,i=t.oxw(2);t.xp6(3),t.Oqu(a+1),t.xp6(1),t.hij(" ",t.lcZ(5,2,i.isChild(a)?"common.child":"common.individual")," ")}}function S(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function Y(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.arabicLettersOnly")," "))}function F(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function w(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.mobileNumber")," "))}function B(e,n){if(1&e&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",39),t.YNc(5,F,3,3,"mat-error",7),t.YNc(6,w,3,3,"mat-error",7),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"home.englishMobileNumber")),t.xp6(3),t.Q6J("ngIf",a.get("mobile").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.get("mobile").hasError("pattern"))}}function j(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.AsE("",a.price," ",t.lcZ(2,2,"common.egp"),"")}}function K(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-option",23),t._uU(2),t.YNc(3,j,3,4,"span",7),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.name," "),t.xp6(1),t.Q6J("ngIf",a.price>0)}}function W(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function $(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-option",23),t._uU(2),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("value",a.id),t.xp6(1),t.Oqu(a.name)}}function V(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function G(e,n){if(1&e&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",11),t.YNc(5,$,3,2,"ng-container",10),t.qZA(),t.YNc(6,V,3,3,"mat-error",7),t.qZA()),2&e){const a=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"address.title")),t.xp6(3),t.Q6J("ngForOf",i.model.addressList),t.xp6(1),t.Q6J("ngIf",a.get("addressId").hasError("required"))}}function X(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function H(e,n){if(1&e&&(t.TgZ(0,"div",16)(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-radio-group",19)(5,"mat-radio-button",18),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-radio-button",18),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"mat-radio-button",18),t._uU(12),t.ALo(13,"translate"),t.qZA()()()),2&e){const a=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,7,"common.socialStatus"),":"),t.xp6(3),t.Q6J("value",a.model.socialStatus.single),t.xp6(1),t.Oqu(t.lcZ(7,9,"common.single")),t.xp6(2),t.Q6J("value",a.model.socialStatus.married),t.xp6(1),t.Oqu(t.lcZ(10,11,"common.married")),t.xp6(2),t.Q6J("value",a.model.socialStatus.widower),t.xp6(1),t.Oqu(t.lcZ(13,13,"common.widower"))}}function z(e,n){1&e&&(t.TgZ(0,"div",16)(1,"label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-radio-group",40)(5,"mat-radio-button",18),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-radio-button",18),t._uU(9),t.ALo(10,"translate"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,5,"common.needChildBed")),t.xp6(3),t.Q6J("value",!0),t.xp6(1),t.Oqu(t.lcZ(7,7,"common.yes")),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.Oqu(t.lcZ(10,9,"common.no")))}function tt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.requiredField")," "))}function et(e,n){if(1&e&&(t.TgZ(0,"div",30)(1,"div",31),t.YNc(2,P,9,4,"div",32),t.TgZ(3,"mat-form-field",5)(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",6),t.YNc(8,S,3,3,"mat-error",7),t.YNc(9,Y,3,3,"mat-error",7),t.qZA(),t.YNc(10,B,7,5,"mat-form-field",33),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-select",9),t.YNc(16,K,4,3,"ng-container",10),t.qZA(),t.YNc(17,W,3,3,"mat-error",7),t.qZA(),t.YNc(18,G,7,5,"mat-form-field",33),t.TgZ(19,"mat-form-field",5)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",12)(24,"mat-datepicker-toggle",13)(25,"mat-datepicker",null,14),t.YNc(27,X,3,3,"mat-error",7),t.qZA(),t.TgZ(28,"div",15)(29,"div",16)(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"mat-radio-group",17)(34,"mat-radio-button",18),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"mat-radio-button",18),t._uU(38),t.ALo(39,"translate"),t.qZA()()(),t.YNc(40,H,14,15,"div",34),t.YNc(41,z,11,11,"div",34),t.qZA(),t.TgZ(42,"mat-form-field",20)(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"textarea",21),t.YNc(47,tt,3,3,"mat-error",7),t.qZA()()()),2&e){const a=n.$implicit,i=n.index,m=t.MAs(26),c=t.oxw(2);t.Q6J("ngClass",c.isChild(i)?"child-section":"adult-section"),t.xp6(1),t.Q6J("formGroupName",i),t.xp6(1),t.Q6J("ngIf",c.model.selectedType===c.model.bookingType.group),t.xp6(3),t.Oqu(t.lcZ(6,26,"home.arabicFullName")),t.xp6(3),t.Q6J("ngIf",a.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",a.get("name").hasError("pattern")),t.xp6(1),t.Q6J("ngIf",!c.isChild(i)),t.xp6(3),t.Oqu(t.lcZ(14,28,"home.transportation")),t.xp6(3),t.Q6J("ngForOf",c.model.busList),t.xp6(1),t.Q6J("ngIf",a.get("transportationId").hasError("required")),t.xp6(1),t.Q6J("ngIf",!c.isChild(i)),t.xp6(3),t.Oqu(t.lcZ(22,30,"common.birthDate")),t.xp6(2),t.Q6J("matDatepicker",m)("max",c.model.maxDate)("min",c.isChild(i)?c.model.childMinDate:c.model.adultMinDate),t.xp6(1),t.Q6J("for",m),t.xp6(3),t.Q6J("ngIf",a.get("birthDate").hasError("required")),t.xp6(4),t.hij("",t.lcZ(32,32,"common.gender"),":"),t.xp6(3),t.Q6J("value",c.model.gender.male),t.xp6(1),t.Oqu(t.lcZ(36,34,"common.male")),t.xp6(2),t.Q6J("value",c.model.gender.female),t.xp6(1),t.Oqu(t.lcZ(39,36,"common.female")),t.xp6(2),t.Q6J("ngIf",!c.isChild(i)),t.xp6(1),t.Q6J("ngIf",c.isChild(i)),t.xp6(3),t.Oqu(t.lcZ(45,38,"common.notes")),t.xp6(3),t.Q6J("ngIf",a.get("userNotes").hasError("required"))}}function at(e,n){if(1&e&&(t.ynx(0),t.YNc(1,et,48,40,"div",29),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.model.participants.controls)}}function ot(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",44)(1,"button",45),t.NdJ("click",function(){t.CHM(a);const m=t.oxw(2);return t.KtG(m.addAdult())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",46),t.NdJ("click",function(){t.CHM(a);const m=t.oxw(2);return t.KtG(m.addChild())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"common.AddAdult")),t.xp6(3),t.Oqu(t.lcZ(6,4,"common.addChild")))}function nt(e,n){if(1&e&&(t.ynx(0),t.YNc(1,ot,7,6,"div",41),t.TgZ(2,"div",42)(3,"button",43),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.model.selectedType===a.model.bookingType.group&&a.model.participants.controls.length<4),t.xp6(3),t.hij(" ",t.lcZ(5,2,"common.addBooking")," ")}}let it=(()=>{class e{constructor(a,i,m,c,rt,lt){this.formBuilder=a,this.fireStoreService=i,this.notifyService=m,this.storageService=c,this.translationService=rt,this.dialogService=lt,this.canManageReservation=!1,this.reservationData=[],this.showForm=new t.vpe(!1),this.closeModal=new t.vpe(!1),this.model=new q,this.model.form=this.initFormModels()}set type(a){this.model.selectedType=a,this.model.form.patchValue({bookingType:a})}set fireSaveAction(a){a&&(this.model.isEditMode=!0,this.save())}ngOnInit(){this.model.isArabic=this.storageService.getItem(_.g.Languages.languageKey)===_.g.Languages.ar,this.getAddressList(),this.getBusList(),this.patchFormValue()}isChild(a){return this.model.participants.controls[a].get("isChild")?.value}addAdult(){this.model.participants.push(this.newParticipant(!1,!0))}remove(a){const i=this.isChild(a)?"child":"individual",m=this.translationService.instant(`common.${i}`);this.dialogService.openConfirmDeleteDialog(this.translationService.instant(`${m}: ${a+1}`)).afterClosed().subscribe(c=>{c&&c.confirmDelete&&this.model.participants.removeAt(a)})}addChild(){this.model.participants.push(this.newParticipant(!0,!0))}save(){this.model.form.valid&&(this.model.isEditMode?this.update():this.add())}newParticipant(a,i){const m=a?null:s.kI.required,c=a?null:[s.kI.required,s.kI.pattern(_.g.Regex.mobileNumber)];return this.formBuilder.group({id:[""],name:["",[s.kI.required,s.kI.pattern(_.g.Regex.arabicLetters)]],transportationId:["",s.kI.required],birthDate:["",s.kI.required],gender:[l.Y0.male,s.kI.required],userNotes:[""],isChild:[a],needsSeparateBed:[i,s.kI.required],addressId:["",m],mobile:["",c],socialStatus:[l.G3.single,m]})}add(){this.fireStoreService.addTicket(this.model.form.value).subscribe(()=>{this.showForm.emit(!1),this.notifyService.showNotifier(this.translationService.instant("notifications.bookedSuccessfully")),this.model.form.reset()})}update(){this.fireStoreService.updateTicket(this.model.form.value).subscribe(()=>{this.closeModal.emit(!0),this.notifyService.showNotifier(this.translationService.instant("notifications.bookedUpdatedSuccessfully")),this.model.form.reset()})}getAddressList(){this.fireStoreService.getAll(_.g.RealtimeDatabase.address).subscribe(a=>{this.model.addressList=a})}getBusList(){this.fireStoreService.getAll(_.g.RealtimeDatabase.buses).subscribe(a=>{this.model.busList=a})}initFormModels(){return this.formBuilder.group({id:[""],name:["",[s.kI.required,s.kI.pattern(_.g.Regex.arabicLetters)]],mobile:["",[s.kI.required,s.kI.pattern(_.g.Regex.mobileNumber)]],birthDate:["",s.kI.required],gender:[l.Y0.male,s.kI.required],socialStatus:[l.G3.single,s.kI.required],addressId:["",s.kI.required],transportationId:["",s.kI.required],bookingDate:[o.EK.fromDate(new Date)],adminNotes:[""],userNotes:[""],total:[0],paid:[0,[s.kI.required,s.kI.min(0)]],remaining:[0,[s.kI.required,s.kI.min(0)]],bookingStatus:[l.gn.new],bookingType:[this.model.selectedType,s.kI.required],roomId:[""],participants:this.formBuilder.array([])})}patchFormValue(){if(this.reservationData&&this.reservationData.length>0){const a=this.reservationData.find(m=>m.isMain),i=this.reservationData.filter(m=>!m.isMain);a&&null!=a&&this.model.form.patchValue({id:a.id,name:a.name,mobile:a.mobile,birthDate:new Date(a.birthDate.toMillis()),gender:a.gender,socialStatus:a.socialStatus,addressId:a.addressId,transportationId:a.transportationId,bookingDate:a.bookingDate,adminNotes:a.adminNotes,userNotes:a.userNotes,total:a.total,paid:a.paid,remaining:a.remaining,bookingStatus:a.bookingStatus,bookingType:a.bookingType,roomId:a.roomId,participants:[]}),i.length>0&&(i.forEach(m=>{m.isChild?this.addChild():this.addAdult()}),this.model.form.patchValue({participants:i.map(m=>({...m,birthDate:new Date(m.birthDate.toMillis())}))}))}}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(s.qu),t.Y36(f.TB),t.Y36(f.c),t.Y36(f.V1),t.Y36(f.D7),t.Y36(f.xA))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-reservation"]],inputs:{canManageReservation:"canManageReservation",reservationData:"reservationData",type:"type",fireSaveAction:"fireSaveAction"},outputs:{showForm:"showForm",closeModal:"closeModal"},decls:79,vars:64,consts:[[1,"row","mx-0","pb-4"],["novalidate","",1,"col-12",3,"formGroup","ngSubmit"],[1,"rounded","primary-section","col-12","pt-3"],[1,"w-100","d-flex","px-2","pb-2"],["color","primary"],[1,"col-md-6","col-12","px-md-2","px-0"],["type","text","matInput","","formControlName","name"],[4,"ngIf"],["type","text","matInput","","formControlName","mobile","inputmode","numeric"],["formControlName","transportationId"],[4,"ngFor","ngForOf"],["formControlName","addressId"],["matInput","","formControlName","birthDate",3,"matDatepicker","max","min"],["matIconSuffix","",3,"for"],["picker",""],[1,"d-flex","flex-md-row","flex-column","pb-3","px-md-2","px-0"],[1,"col-md-6","col-12","px-0"],["formControlName","gender",1,"d-flex"],["color","primary",3,"value"],["formControlName","socialStatus",1,"d-flex"],[1,"col-12","px-md-2","px-0"],["type","text","matInput","","formControlName","userNotes"],["formArrayName","participants"],[3,"value"],["formControlName","bookingStatus"],["type","text","matInput","","formControlName","total","readonly",""],["type","text","matInput","","formControlName","paid","inputmode","numeric"],["type","text","matInput","","formControlName","remaining","inputmode","numeric"],["type","text","matInput","","formControlName","adminNotes"],["class","rounded col-12 mt-3 pt-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"rounded","col-12","mt-3","pt-3",3,"ngClass"],[3,"formGroupName"],["class","d-flex w-100 align-items-center justify-content-between",4,"ngIf"],["class","col-md-6 col-12 px-md-2 px-0",4,"ngIf"],["class","col-md-6 col-12 px-0",4,"ngIf"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"d-flex","justify-content-center","align-items-center","text-light","count","mx-2"],["type","button","mat-icon-button","","color","warn",3,"click"],["type","text","matInput","","formControlName","mobile"],["formControlName","needsSeparateBed",1,"d-flex"],["class","mt-3",4,"ngIf"],[1,"col-12","pt-3","px-md-2","px-0","d-flex","justify-content-end"],["mat-flat-button","","type","submit","color","primary"],[1,"mt-3"],["type","button","mat-stroked-button","","color","primary",3,"click"],["type","button","mat-stroked-button","","color","primary",1,"child-btn",3,"click"]],template:function(a,i){if(1&a&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.save()}),t.TgZ(2,"div",2)(3,"div",3)(4,"mat-icon",4),t._uU(5,"stars"),t.qZA()(),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,D,3,3,"mat-error",7),t.YNc(12,h,3,3,"mat-error",7),t.qZA(),t.TgZ(13,"mat-form-field",5)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,L,3,3,"mat-error",7),t.YNc(19,U,3,3,"mat-error",7),t.qZA(),t.TgZ(20,"mat-form-field",5)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",9),t.YNc(25,O,4,3,"ng-container",10),t.qZA(),t.YNc(26,E,3,3,"mat-error",7),t.qZA(),t.TgZ(27,"mat-form-field",5)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"mat-select",11),t.YNc(32,R,3,2,"ng-container",10),t.qZA(),t.YNc(33,N,3,3,"mat-error",7),t.qZA(),t.TgZ(34,"mat-form-field",5)(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",12)(39,"mat-datepicker-toggle",13)(40,"mat-datepicker",null,14),t.YNc(42,y,3,3,"mat-error",7),t.qZA(),t.TgZ(43,"div",15)(44,"div",16)(45,"label"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"mat-radio-group",17)(49,"mat-radio-button",18),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-radio-button",18),t._uU(53),t.ALo(54,"translate"),t.qZA()()(),t.TgZ(55,"div",16)(56,"label"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"mat-radio-group",19)(60,"mat-radio-button",18),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"mat-radio-button",18),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"mat-radio-button",18),t._uU(67),t.ALo(68,"translate"),t.qZA()()()(),t.TgZ(69,"mat-form-field",20)(70,"mat-label"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._UZ(73,"textarea",21),t.YNc(74,J,3,3,"mat-error",7),t.qZA(),t.YNc(75,k,27,16,"ng-container",7),t.qZA(),t.ynx(76,22),t.YNc(77,at,2,1,"ng-container",7),t.BQk(),t.YNc(78,nt,6,4,"ng-container",7),t.qZA()()),2&a){const m=t.MAs(41);t.ekj("pt-4",i.model.selectedType===i.model.bookingType.individual),t.xp6(1),t.Q6J("formGroup",i.model.form),t.xp6(7),t.Oqu(t.lcZ(9,38,"home.arabicFullName")),t.xp6(3),t.Q6J("ngIf",i.model.form.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.model.form.get("name").hasError("pattern")),t.xp6(3),t.Oqu(t.lcZ(16,40,"home.englishMobileNumber")),t.xp6(3),t.Q6J("ngIf",i.model.form.get("mobile").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.model.form.get("mobile").hasError("pattern")),t.xp6(3),t.Oqu(t.lcZ(23,42,"home.transportation")),t.xp6(3),t.Q6J("ngForOf",i.model.busList),t.xp6(1),t.Q6J("ngIf",i.model.form.get("transportationId").hasError("required")),t.xp6(3),t.Oqu(t.lcZ(30,44,"address.title")),t.xp6(3),t.Q6J("ngForOf",i.model.addressList),t.xp6(1),t.Q6J("ngIf",i.model.form.get("addressId").hasError("required")),t.xp6(3),t.Oqu(t.lcZ(37,46,"common.birthDate")),t.xp6(2),t.Q6J("matDatepicker",m)("max",i.model.maxDate)("min",i.model.adultMinDate),t.xp6(1),t.Q6J("for",m),t.xp6(3),t.Q6J("ngIf",i.model.form.get("birthDate").hasError("required")),t.xp6(4),t.hij("",t.lcZ(47,48,"common.gender"),":"),t.xp6(3),t.Q6J("value",i.model.gender.male),t.xp6(1),t.Oqu(t.lcZ(51,50,"common.male")),t.xp6(2),t.Q6J("value",i.model.gender.female),t.xp6(1),t.Oqu(t.lcZ(54,52,"common.female")),t.xp6(4),t.hij("",t.lcZ(58,54,"common.socialStatus"),":"),t.xp6(3),t.Q6J("value",i.model.socialStatus.single),t.xp6(1),t.Oqu(t.lcZ(62,56,"common.single")),t.xp6(2),t.Q6J("value",i.model.socialStatus.married),t.xp6(1),t.Oqu(t.lcZ(65,58,"common.married")),t.xp6(2),t.Q6J("value",i.model.socialStatus.widower),t.xp6(1),t.Oqu(t.lcZ(68,60,"common.widower")),t.xp6(4),t.Oqu(t.lcZ(72,62,"common.notes")),t.xp6(3),t.Q6J("ngIf",i.model.form.get("userNotes").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.canManageReservation),t.xp6(2),t.Q6J("ngIf",i.model.participants.controls.length>0),t.xp6(1),t.Q6J("ngIf",!i.canManageReservation)}},dependencies:[Z.mk,Z.sg,Z.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,b.Hw,g.KE,g.hX,g.TO,g.R9,T.VQ,T.U0,u.Mq,u.hl,u.nW,x.gD,d.ey,p.Nt,v.lW,v.RK,I.X$],styles:[".primary-section[_ngcontent-%COMP%]{background-color:#dcd8cd}.adult-section[_ngcontent-%COMP%]{background-color:#e3e3e3}.child-section[_ngcontent-%COMP%]{background-color:#c6c6c6}.count[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;background-color:#3f51b5}.child-btn[_ngcontent-%COMP%]{margin-inline-start:8px}"]}),e})()},8788:(C,A,r)=>{r.d(A,{D:()=>D});var t=r(7392),s=r(6895),o=r(9383),l=(r(4767),r(4006)),q=r(9549),f=r(1948),Z=r(9602),b=r(4385),g=r(3238),T=r(4144),u=r(4859),d=(r(8135),r(5412)),p=r(4650);const I=[s.ez,o.aw,l.UX,l.u5,t.Ps,q.lN,f.Fk,Z.FA,g.XK,g.si,b.LD,T.c,u.ot,d.Is];let D=(()=>{class h{}return h.\u0275fac=function(U){return new(U||h)},h.\u0275mod=p.oAB({type:h}),h.\u0275inj=p.cJS({imports:[I,s.ez,o.aw,l.UX,l.u5,t.Ps,q.lN,f.Fk,Z.FA,g.XK,g.si,b.LD,T.c,u.ot,d.Is]}),h})()},6094:(C,A,r)=>{r.d(A,{G3:()=>s,Y0:()=>_,cY:()=>o,gn:()=>t});var t=(()=>{return(l=t||(t={}))[l.new=1]="new",l[l.confirmed=2]="confirmed",l[l.duplicated=3]="duplicated",l[l.canceled=4]="canceled",t;var l})(),s=(()=>{return(l=s||(s={}))[l.single=1]="single",l[l.married=2]="married",l[l.widower=3]="widower",s;var l})(),o=(()=>{return(l=o||(o={}))[l.individual=1]="individual",l[l.group=2]="group",o;var l})(),_=(()=>{return(l=_||(_={}))[l.male=1]="male",l[l.female=2]="female",_;var l})()}}]);